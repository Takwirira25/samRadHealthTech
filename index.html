<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>samRad Health Technologies</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=Cursive" rel="stylesheet">
    <style>
        /* Base Styles */
        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            background: linear-gradient(to right, #f8fbff, #e9f0f8); /* Softer, lighter gradient */
            color: #333;
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        /* Header */
        header {
            background: linear-gradient(to right, #001f3f, #003366); /* Deeper blue gradient */
            color: #fff;
            padding: 0.3rem 1.5rem; /* Constant, minimal padding */
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            flex-direction: column; /* Stacks title and nav vertically for desktop */
            align-items: center;
            text-align: center;
        }

        header h1 {
            margin: 0; /* Remove default margin to reduce vertical space */
            font-size: 2.0rem; /* Fixed, minimal font size for constant header */
            color: #c9e6ff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3),
                         4px 4px 8px rgba(0,0,0,0.2),
                         6px 6px 12px rgba(0,0,0,0.1);
            letter-spacing: 0.05rem;
            line-height: 1.2; /* Adjust line height to reduce space above/below text */
            white-space: nowrap; /* Keep the title on one line */
        }
        
        /* Navigation (Desktop) */
        nav.nav-links {
            margin-top: 0.5rem; /* Minimal margin from title */
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        nav a {
            color: #e0f2f7;
            text-decoration: none;
            font-weight: 600;
            position: relative;
            white-space: nowrap;
            padding-bottom: 5px;
            transition: color 0.2s ease;
            font-size: 0.95rem;
        }

        nav a::after {
            content: '';
            display: block;
            width: 0;
            height: 2px;
            background: #89cff0;
            transition: width 0.2s ease-in-out;
            position: absolute;
            bottom: 0;
            left: 0;
        }

        nav a:hover,
        nav a.active {
            color: #fff;
        }

        nav a:hover::after,
        nav a.active::after {
            width: 100%;
        }

        /* Mobile Menu Toggle (hidden by default on desktop) */
        .menu-toggle {
            display: none;  
            background: none;
            border: none;
            font-size: 1.8rem;
            color: #fff;
            cursor: pointer;
            margin-top: 0.5rem;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background-color 0.2s ease, margin-top 0.2s ease-out;
        }

        /* Main Container */
        .container {
            padding: 3rem 6vw;
            max-width: 1300px;
            margin: 0 auto;
            animation: fadeIn 1.2s ease-out;
        }

        /* Headings */
        h1, h2 {
            color: #001f3f;
            margin-bottom: 1.2rem;
        }

        h2 {
            color: #001f3f;
            font-size: 2rem;
            border-bottom: 2px solid #d0e0f0;
            padding-bottom: 0.7rem;
            position: relative;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2),
                         2px 2px 4px rgba(0,0,0,0.15);
        }

        h2::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 50px;
            height: 3px;
            background: #007bff;
        }

        /* Sections */
        section {
            margin-bottom: 3.5rem;
            padding: 2rem;
            border-radius: 12px;
            background-color: #ffffff;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            transition: all 0.4s ease;
        }

        section.active-section {
            background: #eef7ff;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        /* Services Grid */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .service-card {
            background: #ffffff;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-left: 6px solid #007bff;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .service-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
        }

        .service-card h3 {
            margin-top: 0;
            color: #001f3f;
            font-size: 1.4rem;
            margin-bottom: 0.8rem;
        }

        .service-card p {
            color: #555;
        }

        /* Buttons */
        button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 0.9rem 1.8rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            display: inline-block;
            margin-right: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        button:hover {
            background-color: #0056b3;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Quiz Specific Styles */
        #quiz-form label {
            display: block;
            margin-bottom: 0.8rem;
            cursor: pointer;
            font-size: 1.05rem;
            color: #444;
            transition: color 0.2s ease;
        }

        #quiz-form label:hover {
            color: #007bff;
        }

        #quiz-form label input[type="radio"] {
            margin-right: 0.8rem;
            transform: scale(1.2);
        }

        #quiz-result p {
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
        }

        /* Radiation Animation Styles */
#animation-container-horizontal {
    position: relative;
    width: 100%;
    max-width: 450px;
    height: 300px;
    margin: 2.5rem auto;
    background: #f0f7ff; /* This is the background for the entire scene */
    border-radius: 15px;
    overflow: hidden;
    border: 2px solid #cce0f0;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
    display: flex;
    justify-content: center;
    align-items: center;
}

.gantry-circle {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(0deg);
    width: 240px; /* This is now the OUTER diameter of the ring */
    height: 240px; /* This is now the OUTER diameter of the ring */
    border-radius: 50%;
    z-index: 4;
    transition: transform 0.1s linear;
    /* --- CRITICAL CHANGE: Use multiple inset box-shadows to create the ring --- */
    background: transparent; /* Ensures the center of the div is transparent */
    border: none; /* Remove any default border */
    box-shadow:
        inset 0 0 0 15px #555, /* Innermost part of the ring */
        inset 0 0 0 30px #444, /* Outer part of the ring for a gradient-like effect */
        0 0 15px rgba(0,0,0,0.3); /* Outer shadow for depth */
}

.gantry-head {
    width: 35px;
    height: 35px;
    background: #222;
    border-radius: 50%;
    position: absolute;
    /* Adjust top to account for the new gantry ring thickness (approx 30px total for the visual ring) */
    top: -27px; /* (Roughly: (gantry_visual_radius - head_radius/2) to place on outer edge of ring) */
    left: calc(50% - 17.5px);
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
}

/* Styling for the container that holds the human figure */
.human-body-silhouette {
    position: relative;
    width: 80px; /* Base width of the human figure's area */
    height: 180px; /* Base height of the human figure's area */
    z-index: 2;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Styling for the SVG element itself within the container */
.human-body-silhouette svg {
    width: 100%; /* Makes the SVG take up the full width of its container */
    height: 100%; /* Makes the SVG take up the full height of its container */
    stroke: #d9a78b; /* This is a fallback outline color, though the path will use the gradient */
    stroke-width: 2px; /* This stroke-width applies to any other SVG paths, not the main stick figure */
    filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.2)); /* Subtle drop shadow for depth */
}

/* --- THIS IS THE KEY PART FOR THE STICK FIGURE'S THICKNESS --- */
/* Styling specifically for the <path> element that draws the stick figure */
.human-body-silhouette svg path:first-of-type {
    fill: none; /* Ensures the stick figure is just lines, not filled */
    stroke: url(#humanGradient); /* Applies the cool-toned gradient to the lines */
    stroke-width: 25; /* <<-- MUCH THICKER NOW! */
}

.tumor {
    position: absolute;
    width: 20px; /* Increased initial size */
    height: 20px; /* Increased initial size */
    background: radial-gradient(circle, #cc0000, #800000);
    border-radius: 50%;
    z-index: 3;
    box-shadow: 0 0 12px 2px rgba(200,0,0,0.8); /* Adjusted shadow for larger size */
    transform: scale(1);
    opacity: 1;
    transition: transform 0.5s ease-out, opacity 0.5s ease-out;
    top: 55%;
    left: 50%;
    transform: translate(-50%, -50%) scale(1);
}

.tumor.glowing {
    animation: tumorGlow 0.8s infinite alternate ease-in-out;
}

@keyframes tumorGlow {
    from { box-shadow: 0 0 12px 2px rgba(200,0,0,0.8); } /* Adjusted glow for larger size */
    to { box-shadow: 0 0 25px 5px rgba(255,50,50,0.9); } /* Brighter, larger glow */
}

.beam {
    position: absolute;
    height: 12px; /* Increased beam height for visibility */
    width: 0;
    /* More intense reddish-orange gradient */
    background: linear-gradient(to right, rgba(255, 100, 0, 0.95), rgba(255, 20, 0, 1)); 
    top: 50%;
    left: 50%;
    /* transform-origin will be set by JS */
    transform: translateY(-50%) rotate(0deg); /* Explicitly set to 0deg for a straight horizontal line */
    box-shadow: 0 0 50px rgba(255, 50, 0, 1.2); /* More intense glow */
    border-radius: 6px; /* Slightly larger border-radius for thicker beam */
    z-index: 4;
    opacity: 0;
    transition: width 0.1s linear, opacity 0.1s linear;
}

.beam.firing {
    animation: beamPulse 0.3s infinite alternate; /* Pulsating effect */
}

@keyframes beamPulse {
    from { box-shadow: 0 0 40px rgba(255, 100, 0, 1); } /* More intense pulse glow */
    to { box-shadow: 0 0 80px 10px rgba(255, 20, 0, 1.5); } /* More intense pulse glow */
}

.patient-table {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 80px;
    background-color: #777;
    border-top: 10px solid #555;
    z-index: 1;
    box-shadow: inset 0 5px 10px rgba(0,0,0,0.2); /* Inner shadow for depth */
}
.patient-table::before {
    content: '';
    position: absolute;
    top: -10px;
    left: 20%;
    width: 60%;
    height: 10px;
    background-color: #aaa;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
}
        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            header {
                padding: 0.3rem 1rem; /* Reduced padding for mobile */
            }

            header h1 {
                font-size: 1.5rem; /* Smaller font for mobile header */
                white-space: nowrap; /* Ensure it stays on one line */
                overflow: hidden; /* Hide overflow if it somehow goes beyond */
                text-overflow: ellipsis; /* Add ellipsis if hidden */
            }

            nav.nav-links {
                /* No flex-direction: column; to keep links horizontal */
                gap: 0.3rem; /* Reduced gap between links */
                margin-top: 0.3rem; /* Reduced margin from title */
                justify-content: space-around; /* Distribute space more evenly */
                flex-wrap: wrap; /* Allow wrapping if absolutely necessary, but try to prevent */
            }

            nav a {
                font-size: 0.75rem; /* Even smaller font for nav links */
                padding: 3px 0.1rem; /* Reduced vertical and horizontal padding for tighter fit */
            }

            .container {
                padding: 2rem 4vw; /* Slightly less padding on sides for mobile */
            }

            h2 {
                font-size: 1.7rem; /* Smaller headings on mobile */
                padding-bottom: 0.5rem;
            }

            section {
                padding: 1.5rem; /* Reduced section padding */
            }

            .service-card {
                padding: 1.5rem; /* Reduced service card padding */
            }

            button {
                padding: 0.7rem 1.4rem; /* Smaller button padding */
                font-size: 0.95rem; /* Smaller button font */
            }
        }
        
        /* Further optimization for very small screens */
        @media (max-width: 480px) {
            header h1 {
                font-size: 1.2rem; /* Even smaller font for very small mobile header */
            }
            nav a {
                font-size: 0.65rem; /* Even smaller font for very small mobile nav links */
                padding: 2px 0.05rem; /* Even tighter padding */
            }
        }

    </style>
</head>
<body>

    <header>
        <h1>samRad Health Technologies</h1>
        <nav class="nav-links">
            <a href="#about">About</a>
            <a href="#services">Services</a>
            <a href="#continuous-improvement">Advancements</a>
            <a href="#certifications">Certifications</a>
            <a href="#quiz">Imaging & Quiz</a>
            <a href="#radiation-animation">Radiation Simulation</a>
            <a href="#contact">Contact</a>
        </nav>
    </header>

    <div class="container">
        <section id="about">
            <h2>About Us</h2>
            <p>samRad Health Technologies is a visionary cancer research and healthtech enterprise. Our mission is to pioneer intelligent, automated systems that empower clinicians to detect and quantify tumors from radiological imaging with precision and ease. Our AI pipelines are open, transparent, and designed to speed up diagnostics and enhance medical research.</p>
            <p>Founded by Samuel B. Takwirira, a Zimbabwean PhD student in Physics at the University of New Hampshire in the United States, the initiative is rooted in a passion for oncology and a heartfelt commitment to expanding access to care. Coming from a background marked by economic hardship and limited access to advanced healthcare, Takwirira has firsthand experience of the challenges faced by most African communities.</p>
            <p>Through resilience and a relentless pursuit of education, he now seeks to transform lives&mdash;not just through innovation, but by creating pathways for others from similar circumstances. samRad Health Technologies aspires to forge partnerships with hospitals across Zimbabwe and Southern Africa, uplifting cancer care through technological excellence and shared knowledge.</p>
        </section>

        <section id="services">
            <h2>Our Services</h2>
            <div class="services-grid">
                <div class="service-card">
                    <h3>AI Tumor Detection</h3>
                    <p>Instant analysis of medical scan images (DICOM) to assess cancer risk using trained AI models.</p>
                </div>
                <div class="service-card">
                    <h3>Clinical Pipeline Tooling</h3>
                    <p>Command-line tools for clinical researchers to process imaging data and patient datasets efficiently at scale.</p>
                 fungicide</p>
                </div>
                <div class="service-card">
                    <h3>Data Integration & Interoperability</h3>
                    <p>Robust support for structured CSV metadata, clinical tagging, and export-ready research formats. Seamlessly integrate with existing hospital systems.</p>
                </div>
            </div>
        </section>

        <section id="continuous-improvement">
            <h2>Advancements</h2>
           <p>At samRad Health Technologies, our mission centers on <strong>precision</strong>&mdash;a quality vividly demonstrated in this radiation beam simulation. The gantry, the rotating arm of a radiation machine, precisely delivers a targeted beam to the tumor, minimizing exposure to healthy tissue. This animation highlights the <strong>crucial role of accurate targeting</strong> in modern cancer treatment and is a core example of the advancements we are working to bring to cancer care.</p>
        </section>

        <section id="certifications">
            <h2>Certifications & Research Ethics</h2>
            <ul>
                <li>Fully compliant with <strong>HIPAA</strong> data handling protocols to ensure patient data privacy and security.</li>
                <li>Model validation on ethically sourced, anonymized datasets to maintain integrity and prevent bias.</li>
                <li>Strict adherence to <strong>IRB</strong> (Institutional Review Board) and institutional ethics review processes for all research and development.</li>
            </ul>
        </section>

        <section id="quiz">
            <h2>Imaging and Quiz</h2>
            <p>Radiology is more than just images on a screen&mdash;it’s often the first glimpse into a life forever changed. For those touched by cancer, whether through personal battle, the struggle of a loved one, or even the fear of the unknown, the journey is deeply personal. In those moments of waiting and worry, tools like MRI, CT, and PET scans become lifelines&mdash;windows into hope, clarity, and action. Understanding these tools can bring comfort, courage, and a sense of control when everything else feels uncertain.</p>

            <p><strong>Test your knowledge:</strong></p>
            <button id="start-quiz-btn">Start Quiz</button>
            <form id="quiz-form" style="display:none; margin-top:1.5rem;"></form>
            <div id="quiz-result" style="margin-top:1.5rem; font-weight:bold;"></div>
        </section>

        <div id="radiation-animation">
    <h2>Radiation Beam Simulation</h2>
    <p>At samRad Health Technologies, our mission centers on <strong>precision</strong>&mdash;a quality vividly demonstrated in this radiation beam simulation. The gantry, the rotating arm of a radiation machine, precisely delivers a targeted beam to the tumor, minimizing exposure to healthy tissue. This animation highlights the <strong>crucial role of accurate targeting</strong> in modern cancer treatment and is a core example of the advancements we are working to bring to cancer care.</p>
    
    <div id="animation-container-horizontal">
        <div class="gantry-circle">
            <div class="gantry-head"></div>
        </div>
        <div class="human-body-silhouette" id="human-target">
            <svg viewBox="0 0 100 200" preserveAspectRatio="xMidYMid meet">
                <defs>
                    <linearGradient id="humanGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#b0c4de;stop-opacity:1" /> <stop offset="50%" style="stop-color:#a0b4ce;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#90a4be;stop-opacity:1" /> </linearGradient>
                </defs>
                <path d="M50,20 A15,15 0 1 1 50,50 A15,15 0 1 1 50,20 Z 
                         M50,50 L50,120 
                         M50,70 L20,90 M50,70 L80,90 
                         M50,120 L35,180 M50,120 L65,180"
                      fill="none" stroke="url(#humanGradient)" stroke-width="4"></path>
            </svg>
            <div class="tumor"></div>
        </div>
        <div class="beam"></div>
        <div class="patient-table"></div>
    </div>
    <button id="start-animation-btn" style="margin-top: 1.5rem;">Start Simulation</button>
</div>
        <section id="contact">
            <h2>Contact Us</h2>
            <p>Email: <a href="mailto:takwirira@proton.me">takwirira@proton.me</a></p>
            <p>GitHub: <a href="https://takwirira25.github.io/samRad-Health-Technologies/" target="_blank" rel="noopener noreferrer">https://takwirira25.github.io/samRad-Health-Technologies/</a></p>
        </section>
    </div>

    <footer>
        <p>&copy; 2025 samRad Health Technologies. All rights reserved.</p>
    </footer>

    <script>
        function throttle(func, limit) {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const headerTitle = document.querySelector('header h1');
            const navLinks = document.querySelector('nav.nav-links');
            const menuToggle = document.querySelector('.menu-toggle'); 
            const header = document.querySelector('header');

            if (!headerTitle || !navLinks || !header) {
                console.warn('Required header elements for mobile menu not found.');
            }

            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                });
            });

            // Highlight active section on scroll
            const sections = document.querySelectorAll('section, #radiation-animation');
            const highlightActiveSection = () => {
                let currentActive = null;
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - header.offsetHeight - 50; // Offset for sticky header
                    const sectionBottom = sectionTop + section.offsetHeight;
                    if (window.scrollY >= sectionTop && window.scrollY < sectionBottom) {
                        currentActive = section.id;
                    }
                    section.classList.remove('active-section');
                });

                if (currentActive) {
                    document.getElementById(currentActive).classList.add('active-section');
                    navLinks.querySelectorAll('a').forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${currentActive}`) {
                            link.classList.add('active');
                        }
                    });
                }
            };

            window.addEventListener('scroll', throttle(highlightActiveSection, 100)); // Throttled for performance
            highlightActiveSection(); // Initial call on load

            // --- Quiz Data and Logic ---
            const quizData = [
                { question: "What does MRI primarily use to generate images?", options: ["X-rays", "Magnetic fields & radio waves", "Sound waves", "Gamma rays"], answer: 1 },
                { question: "What tracer is commonly used in PET scans?", options: ["Iodine-131", "Technetium-99m", "Fluorodeoxyglucose (FDG)", "Gadolinium"], answer: 2 },
                { question: "CT scans are best for visualizing:", options: ["Soft tissues", "Bone fractures", "Ligaments", "Muscle tears"], answer: 1 },
                { question: "Radiation therapy aims to:", options: ["Cure viral infections", "Kill cancer cells using ionizing radiation", "Deliver chemotherapy", "Visualize tumors"], answer: 1 },
                { question: "Which imaging technique does NOT use ionizing radiation?", options: ["CT", "PET", "MRI", "X-ray"], answer: 2 },
                { question: "PET-CT combines functional imaging with:", options: ["MRI detail", "CT detail", "Ultrasound mapping", "Bone scan"], answer: 1 },
                { question: "Which of the following is a late side effect of radiation therapy?", options: ["Hair loss", "Skin redness", "Fibrosis", "Nausea"], answer: 2 },
                { question: "MRI contrast agents often contain:", options: ["Lead", "Barium", "Gadolinium", "Iodine"], answer: 2 },
                { question: "Which scan is most sensitive for brain soft tissue detail?", options: ["X-ray", "CT", "PET", "MRI"], answer: 3 },
                { question: "Which of the following improves MRI resolution?", options: ["Higher magnetic field strength", "More X-ray dose", "Lower radiofrequency", "Using ultrasound gel"], answer: 0 }
            ];

            const startQuizBtn = document.getElementById("start-quiz-btn");
            const quizForm = document.getElementById("quiz-form");
            const quizResult = document.getElementById("quiz-result");

            function getFeedback(score, total) {
                const percent = (score / total) * 100;
                if (percent === 100) return "Outstanding! You're a radiology genius!";
                if (percent >= 80) return "Great job! You really know your imaging.";
                if (percent >= 50) return "Nice effort! A bit more study and you'll master this.";
                return "Keep learning — knowledge saves lives!";
            }

            function getFeedbackColor(percent) {
                if (percent >= 80) return "green";
                else if (percent >= 50) return "orange";
                else return "red";
            }

            function saveScore(score, total) {
                const entry = { score, total, timestamp: new Date().toISOString() };
                const scores = JSON.parse(localStorage.getItem("quizScores") || "[]");
                scores.push(entry);
                localStorage.setItem("quizScores", JSON.stringify(scores));
            }

            function renderQuestion(index, answers, next) {
                quizForm.innerHTML = "";
                const q = quizData[index];

                const qElem = document.createElement("p");
                qElem.textContent = `${index + 1}. ${q.question}`;
                quizForm.appendChild(qElem);

                q.options.forEach((opt, i) => {
                    const label = document.createElement("label");
                    const input = document.createElement("input");
                    input.type = "radio";
                    input.name = `q${index}`;
                    input.value = i;
                    input.id = `q${index}-option${i}`;

                    label.appendChild(input);
                    label.append(` ${opt}`);
                    quizForm.appendChild(label);

                    input.addEventListener("change", () => {
                        answers[index] = parseInt(input.value);
                        setTimeout(next, 300);
                    });
                });
            }

            function runQuiz() {
                let currentIndex = 0;
                const answers = {};
                quizForm.style.display = "block";
                quizResult.innerHTML = "";
                startQuizBtn.style.display = "none";

                function nextQuestion() {
                    currentIndex++;
                    if (currentIndex < quizData.length) {
                        renderQuestion(currentIndex, answers, nextQuestion);
                    } else {
                        finishQuiz(answers);
                    }
                }
                renderQuestion(currentIndex, answers, nextQuestion);
            }

            function finishQuiz(answers) {
                let score = 0;
                quizData.forEach((q, idx) => {
                    if (answers[idx] === q.answer) score++;
                });

                const total = quizData.length;
                const percent = (score / total) * 100;
                const feedback = getFeedback(score, total);
                const color = getFeedbackColor(percent);
                saveScore(score, total);

                quizForm.style.display = "none";
                startQuizBtn.style.display = "inline-block";
                startQuizBtn.textContent = "Retake Quiz";

                quizResult.innerHTML = `
                    <p>You scored ${score} out of ${total}.</p>
                    <p style="color:${color};">${feedback}</p>
                    <button id="exit-quiz-btn">Exit Quiz</button>
                    <button id="show-stats-btn">Show Highest Score</button>
                    <button id="reset-stats-btn">Reset Stats</button>
                `;

                document.getElementById("exit-quiz-btn").addEventListener("click", () => {
                    quizResult.innerHTML = "";
                    startQuizBtn.textContent = "Start Quiz";
                });

                document.getElementById("show-stats-btn").addEventListener("click", () => {
                    const scores = JSON.parse(localStorage.getItem("quizScores") || "[]");
                    const statsMessage = document.createElement("p");
                    if (scores.length === 0) {
                        statsMessage.textContent = "No scores recorded yet.";
                        statsMessage.style.color = "gray";
                    } else {
                        const maxScore = Math.max(...scores.map(s => s.score));
                        const percentMax = (maxScore / quizData.length) * 100;
                        statsMessage.textContent = `Your Highest Score so far is: ${maxScore} out of ${quizData.length}.`;
                        statsMessage.style.color = getFeedbackColor(percentMax);
                    }
                    quizResult.appendChild(statsMessage);
                    document.getElementById("show-stats-btn").disabled = true;
                });

                document.getElementById("reset-stats-btn").addEventListener("click", () => {
                    localStorage.removeItem("quizScores");
                    Array.from(quizResult.children).forEach(el => {
                        const text = el.textContent.trim();
                        if (
                            text.startsWith("Your Highest Score so far") ||
                            text.startsWith("No scores recorded yet.")
                        ) {
                            el.remove();
                        }
                    });
                    const confirmMsg = document.createElement("p");
                    confirmMsg.textContent = "Stats reset successfully.";
                    confirmMsg.style.color = "green";
                    quizResult.appendChild(confirmMsg);
                    setTimeout(() => {
                        confirmMsg.remove();
                        document.getElementById("show-stats-btn").disabled = false;
                    }, 5000);
                });
            }

            startQuizBtn.addEventListener("click", runQuiz);


            /* existing javascript */

// --- Radiation Animation Script ---
const gantry = document.querySelector('.gantry-circle');
const gantryHead = document.querySelector('.gantry-head');
const beam = document.querySelector('.beam');
const tumor = document.querySelector('.tumor');
const humanTarget = document.getElementById('human-target');
const startAnimationBtn = document.getElementById('start-animation-btn');

let gantryCurrentAngle = 0; // Starts at 0 (right)

function setInitialGantryPosition() {
    gantry.style.transform = `translate(-50%, -50%) rotate(0deg)`;
    gantry.classList.remove('no-transition'); // Ensure transitions are enabled for subsequent animations
}

function resetBeamAndTumor() {
    beam.getAnimations().forEach(anim => anim.cancel());
    tumor.getAnimations().forEach(anim => anim.cancel());

    beam.style.width = '0';
    beam.style.opacity = '0';
    beam.classList.remove('firing');
    gantryHead.classList.remove('active-aperture'); // Hide aperture glow

    // Reset tumor to its initial larger size and full opacity
    tumor.style.transform = 'translate(-50%, -50%) scale(1)';
    tumor.style.opacity = '1';
    tumor.classList.remove('glowing', 'shrinking', 'impact-glow'); // Remove all tumor animation classes

    startAnimationBtn.disabled = false;
    startAnimationBtn.textContent = "Start Simulation";
}

async function startRadiationAnimation() {
    startAnimationBtn.disabled = true;
    startAnimationBtn.textContent = "Simulating...";
    
    // Reset beam and tumor, but allow gantry to remain at its last position (or 0deg on first run)
    resetBeamAndTumor(); 

    const INITIAL_GANTRY_ANGLE = gantryCurrentAngle; // Start from wherever the gantry is
    const BEAM_DELIVERY_GANTRY_ANGLE = 270; // 3/4 clockwise revolution
    const FINAL_GANTRY_ANGLE_VISUAL_STOP = 359.999; // Represents 360 degrees, avoids flicker at 0

    const GANTRY_FIRST_ROTATION_DURATION = 2000; 
    const GANTRY_SECOND_ROTATION_DURATION = 1000;
    const BEAM_FIRE_DURATION = 1200; 
    const BEAM_EXPAND_TIME = 300;
    const BEAM_RETRACT_TIME = 300;
    const TUMOR_SHRINK_DURATION = 800;
    const APERTURE_DELAY = 100;

    // 1. Rotate gantry to the beam delivery angle (0 to 270 degrees)
    const gantryFirstRotation = gantry.animate(
        [
            { transform: `translate(-50%, -50%) rotate(${INITIAL_GANTRY_ANGLE}deg)` }, 
            { transform: `translate(-50%, -50%) rotate(${BEAM_DELIVERY_GANTRY_ANGLE}deg)` }
        ],
        {
            duration: GANTRY_FIRST_ROTATION_DURATION,
            iterations: 1,
            fill: 'forwards',
            easing: 'ease-in-out'
        }
    );
    await gantryFirstRotation.finished;
    gantryCurrentAngle = BEAM_DELIVERY_GANTRY_ANGLE; // Update current angle for next animation

    await new Promise(resolve => setTimeout(resolve, 600)); // Pause after first rotation

    // 2. Fire beam from left towards tumor and start tumor glow
    gantryHead.classList.add('active-aperture'); // Show aperture glow
    tumor.classList.add('glowing'); // Start tumor glow

    const animationContainer = document.getElementById('animation-container-horizontal');
    const containerRect = animationContainer.getBoundingClientRect();

    const tumorCenterX_relative = tumor.offsetLeft + tumor.offsetWidth / 2;
    const gantryHeadRelativeX = (containerRect.width / 2) - 27; 
    const gantryHeadRelativeY = containerRect.height / 2; 

    beam.style.left = `${gantryHeadRelativeX}px`;
    beam.style.top = `${gantryHeadRelativeY}px`;
    beam.style.transformOrigin = '0 50%'; 
    beam.style.transform = `translateY(-50%) rotate(0deg)`; // Ensure it's a straight horizontal line

    const beamLength = tumorCenterX_relative - gantryHeadRelativeX;

    await new Promise(resolve => setTimeout(resolve, APERTURE_DELAY)); 

    beam.classList.add('firing');
    beam.style.opacity = '1';

    const beamExpandAnimation = beam.animate(
        [
            { width: '0px' },
            { width: `${beamLength}px` }
        ],
        {
            duration: BEAM_EXPAND_TIME,
            iterations: 1,
            fill: 'forwards',
            easing: 'ease-out'
        }
    );
    await beamExpandAnimation.finished; 

    tumor.classList.remove('glowing'); 
    tumor.classList.add('impact-glow'); 

    const tumorShrinkAnimation = tumor.animate(
        [
            { transform: 'translate(-50%, -50%) scale(1)', opacity: 1 },
            { transform: 'translate(-50%, -50%) scale(0.1)', opacity: 0 }
        ],
        {
            duration: TUMOR_SHRINK_DURATION,
            fill: 'forwards',
            easing: 'ease-out'
        }
    );

    const beamHoldTime = BEAM_FIRE_DURATION - BEAM_EXPAND_TIME - BEAM_RETRACT_TIME;
    await new Promise(resolve => setTimeout(resolve, Math.max(0, beamHoldTime))); 

    const beamRetractAnimation = beam.animate(
        [
            { width: `${beamLength}px`, opacity: 1 },
            { width: '0px', opacity: 0 }
        ],
        {
            duration: BEAM_RETRACT_TIME,
            iterations: 1,
            fill: 'forwards',
            easing: 'ease-in'
        }
    );

    // 3. Gantry finishes revolution as tumor shrinks and beam retracts
    const gantrySecondRotation = gantry.animate(
        [
            { transform: `translate(-50%, -50%) rotate(${gantryCurrentAngle}deg)` },
            { transform: `translate(-50%, -50%) rotate(${gantryCurrentAngle + (360 - BEAM_DELIVERY_GANTRY_ANGLE)}deg)` } // Rotate remaining degrees to complete 360 from start
        ],
        {
            duration: GANTRY_SECOND_ROTATION_DURATION,
            iterations: 1,
            fill: 'forwards',
            easing: 'ease-in-out'
        }
    );

    await Promise.all([
        tumorShrinkAnimation.finished,
        beamRetractAnimation.finished,
        gantrySecondRotation.finished
    ]);

    // Update current angle to reflect its final stopped position, normalizing for future runs
    gantryCurrentAngle = gantryCurrentAngle + (360 - BEAM_DELIVERY_GANTRY_ANGLE);
    gantryCurrentAngle = gantryCurrentAngle % 360; // Keep angle within 0-359 range

    // Only reset beam and tumor, gantry stays
    resetBeamAndTumor(); 
}

// Set initial gantry position on page load
setInitialGantryPosition();

startAnimationBtn.addEventListener('click', throttle(startRadiationAnimation, 6000)); 
            // Add smooth scrolling for navigation links
            document.querySelectorAll('nav a').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

        });
    </script>
</body>
</html>
